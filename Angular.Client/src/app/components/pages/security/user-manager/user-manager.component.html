<div class="contianer-fluid">
  <h1 class="text-center mb-4">User Management</h1>
  <div class="row shadow rounded-2">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="mb-4">
      <div class="row g-3">
        <div class="col-md-3">
          <input
            type="text"
            id="name"
            formControlName="name"
            class="form-control"
            placeholder="Name..."
            required
          />
        </div>
        <div class="col-md-3">
          <input
            type="text"
            id="family"
            formControlName="family"
            class="form-control"
            placeholder="Family..."
            required
          />
        </div>
        <div class="col-md-3">
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
            placeholder="Email..."
            required
          />
        </div>
        <div class="col-md-3">
          <input
            type="tel"
            id="phone"
            formControlName="phone"
            class="form-control"
            placeholder="Phone..."
            required
          />
        </div>
        <div class="col-md-3">
          <input
            type="tel"
            id="nationalCode"
            formControlName="nationalCode"
            class="form-control"
            placeholder="NationalCode..."
            required
          />
        </div>
      </div>
      <div class="d-flex justify-content-end mt-3">
        <button type="submit" class="btn btn-primary">
          {{ isEditMode ? "Update User" : "Add User" }}
        </button>
      </div>
    </form>
  </div>
  <div class="row shadow rounded-2">
    <div class="col-12">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Family</th>
            <th>Email</th>
            <th>NationalCode</th>
            <th>Phone</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of paginatedData; let i = index">
            <td>{{ (currentPage - 1) * rowsPerPage + i + 1 }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.family }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.nationalCode }}</td>
            <td>{{ user.phone }}</td>
            <td>
              <a
                class="icon-link-hover me-3 text-warning"
                href="javascript:void(0)"
                (click)="onEdit(user)"
              >
                <i class="bi bi-pencil-square"></i>
              </a>
              <a
                class="icon-link-hover me-3 text-primary"
                href="javascript:void(0)"
                (click)="showReadDialog(user)"
              >
                <i class="bi bi-bar-chart-steps"></i>
              </a>
              <a
                class="icon-link-hover me-3 text-danger"
                href="javascript:void(0)"
                (click)="onDelete(user)"
              >
                <i class="bi bi-trash-fill"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
      <nav>
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button
              class="page-link"
              (click)="goToPage(currentPage - 1)"
              aria-label="Previous"
            >
              &laquo;
            </button>
          </li>
          <li
            class="page-item"
            *ngFor="let page of pages"
            [class.active]="page === currentPage"
          >
            <button class="page-link" (click)="goToPage(page)">
              {{ page }}
            </button>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button
              class="page-link"
              (click)="goToPage(currentPage + 1)"
              aria-label="Next"
            >
              &raquo;
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
